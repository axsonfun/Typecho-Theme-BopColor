function Kico_Style(){var kico={};var that=this;this.forEach=function(data,fn){for(var i=0;i<data.length;i++){fn(data[i],i,data)}};this.create=function(tag,prop){var obj=document.createElement(tag);if(prop){if(prop.id)obj.id=prop.id;if(prop.href)obj.href=prop.href;if(prop.class)obj.className=prop.class;if(prop.text)obj.innerText=prop.text;if(prop.html)obj.innerHTML=prop.html;if(prop.child){if(prop.child.constructor===Array){that.forEach(prop.child,function(i){obj.appendChild(i)})}else{obj.appendChild(prop.child)}}}return obj};this.select=function(obj){if(typeof obj==='object'){return obj}else if(typeof obj==='string'){return document.querySelector(obj)}};this.selectAll=function(obj){if(typeof obj==='object'){return obj}else if(typeof obj==='string'){return document.querySelectorAll(obj)}};kico.notice_list=this.create("div",{class:"ks-notice-list"});this.notice=function(content,attr){var item=that.create("div",{class:"ks-notice"});item.innerHTML+="<span class='content'>"+content+"</span>";kico.notice_list.appendChild(item);if(!document.querySelector("body > .ks-notice-list"))document.body.appendChild(kico.notice_list);if(attr&&attr.time){setTimeout(notice_remove,attr.time)}else{var close=this.create("span",{class:"close"});close.addEventListener("click",function(){notice_remove()});item.classList.add("dismiss");item.appendChild(close)}if(attr&&attr.color){item.classList.add(attr.color)}function notice_remove(){item.classList.add("remove");setTimeout(function(){try{kico.notice_list.removeChild(item);item=null}catch(err){}if(document.querySelector("body > .ks-notice-list")&&kico.notice_list.childNodes.length===0){document.body.removeChild(kico.notice_list)}},300)}};kico.overlay=this.create("div",{class:"ks-overlay"});this.overlay=function(attr){document.body.appendChild(kico.overlay);if(attr&&attr.time){setTimeout(overlay_remove,attr.time)}else{kico.overlay.onclick=function(){overlay_remove()}}if(attr&&attr.code){kico.overlay.onclick=function(){overlay_remove();attr.code()}}function overlay_remove(){kico.overlay.onclick=null;kico.overlay.classList.add("remove");setTimeout(function(){if(document.querySelector("body > .ks-overlay")){kico.overlay.classList.remove("remove");document.body.removeChild(kico.overlay)}},300)}};kico.image_box=[];kico.image_box.img=this.create("img");kico.image_box.prev=this.create("div",{class:"ks-prev"});kico.image_box.next=this.create("div",{class:"ks-next"});kico.image_box.ball=this.create("div",{class:"ks-ball"});kico.image_box.wrap=this.create("div",{class:"ks-image",child:[kico.image_box.img,kico.image_box.prev,kico.image_box.next,kico.image_box.ball]});this.image=function(selector){var current=0;var get_images=this.selectAll(selector);function set_image(img){if(img.getAttribute("ks-original")!==null){kico.image_box.img.src=img.getAttribute("ks-original")}else if(img.src){kico.image_box.img.src=img.src}kico.image_box.ball.classList.add("loading")}function set_buttons(c){function l(){if(current-1>=0)current--;set_image(get_images[current])}function r(){if(current+1<get_images.length)current++;set_image(get_images[current])}kico.image_box.prev.onclick=l;kico.image_box.next.onclick=r}function set_item(obj,num){var scale=1;var locationX,locationY;obj.setAttribute("ks-image","active");function single_click(){current=num;console.log("现在选中了"+current);set_image(obj);set_buttons(num);if(!document.body.contains(kico.image_box.wrap)){document.body.appendChild(kico.image_box.wrap)}}obj.onclick=single_click}this.forEach(get_images,function(i,j){if(i.src||i.getAttribute("ks-original")){set_item(i,j)}});kico.image_box.img.onclick=function(){kico.image_box.wrap.classList.add("remove");setTimeout(function(){try{document.body.removeChild(kico.image_box.wrap);kico.image_box.wrap.classList.remove("remove")}catch(err){}},300)};kico.image_box.img.onload=function(){kico.image_box.ball.classList.remove("loading")}};this.ajax=function(prop){if(!prop.url){prop.url=document.location.origin+document.location.pathname}function test_crossDomain(){var a=document.createElement("a");a.href=window.location.hostname;return a.hostname===prop.url?true:false}if(prop.method==="POST"){var data=new FormData();for(var pk in prop.data){data.append(pk,prop.data[pk])}}else if(prop.method==="GET"){var url=prop.url+"?";for(var k in prop.data){url+=k+"="+prop.data[k]+"&"}prop.url=url.substr(0,url.length-1)}var request=new XMLHttpRequest();request.open(prop.method,prop.url);if(prop.crossDomain){request.setRequestHeader("X-Requested-With","XMLHttpRequest")}if(prop.header){for(var i in prop.header){request.setRequestHeader(prop.header[i][0],prop.header[i][1])}}request.send(data);request.onreadystatechange=function(){if(request.readyState===4){if(request.status===200||request.status===304){prop.success?prop.success(request):console.log(prop.method+" 请求发送成功")}else{prop.failed?prop.failed(request):console.log(prop.method+" 请求发送失败")}}}};this.scrollTop=function(){function to_top(){if(window.scrollY!==0){window.scrollTo(0,window.scrollY*0.9);requestAnimationFrame(to_top)}else{cancelAnimationFrame(this)}}window.requestAnimationFrame(to_top)};console.log("%c Kico Style %c https://paugram.com ","color: #fff; margin: 1em 0; padding: 5px 0; background: #3498db;","margin: 1em 0; padding: 5px 0; background: #efefef;")}var ks=new Kico_Style();